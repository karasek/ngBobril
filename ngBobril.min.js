!function(n,t){if(!b)throw Error("Cannot find bobril library");b.init(function(){return!1}),"undefined"!=typeof module&&module.exports?module.exports=t(require("bobril"),require("angular")):"function"==typeof define&&define.amd?define(["bobril","angular"],function(r,o){return n.ngBobril=t(r,o)}):n.ngBobril=t(n.b,n.angular)}(this,function(n,t){"use strict";function r(n,r){if(t.isFunction(n))return n;if(!n)throw Error("BobrilComponent name attribute must be specified");var o;try{o=r.get(n)}catch(i){}if(!o)try{o=n.split(".").reduce(function(n,t){return n[t]},window)}catch(i){}if(!o)throw Error("Cannot find bobril component "+n);return o}function o(n,t){return n.wrappedInApply?n:function(){var r=arguments;t.$apply(function(){n.wrappedInApply=!0,n.apply(null,r)})}}function i(n,r){return Object.keys(n||{}).reduce(function(i,e){var u=n[e];return i[e]=t.isFunction(u)?o(u,r):u,i},{})}function e(t,r,o,i){o(function(){var o=i[0];o.id&&n.removeRoot(o.id),o.id=n.addRoot(function(){return{tag:"div",data:r,component:t}},o)})}var u=function(t,o){return{restrict:"E",replace:!0,link:function(u,c,a){var f=r(a.name,o),d=function(){var n=u.$eval(a.data),r=i(n,u);e(f,r,t,c)};a.data?u.$watch(a.data,d,!0):d(),u.$on("$destroy",function(){c[0]&&c[0].id&&n.removeRoot(c[0].id)})}}},c=function(o,u){return function(c,a,f){var d={restrict:"E",replace:!0,link:function(t,f,d){var l=r(c,u);a=a||{};var b=function(){var n={};a.forEach(function(r){n[r]=t.$eval(d[r])}),e(l,i(n,t),o,f)};a.forEach(function(n){t.$watch(d[n],function(){b()},!0)}),b(),t.$on("$destroy",function(){f[0]&&f[0].id&&n.removeRoot(f[0].id)})}};return t.extend(d,f)}};return t.module("bobril",[]).directive("bobrilComponent",["$timeout","$injector",u]).factory("bobrilDirective",["$timeout","$injector",c])});